# Верификация контракта

### Что такое верификация контракта? <a href="#what-is-contract-verification" id="what-is-contract-verification"></a>

Когда вы разворачиваете смарт-контракт в сети, то по факту вы размещаете байт-код, созданный компилятором Solidity.

Верификация контракта несет в себе определение того, совпадает ли он-чейн байт-код с кодом, сгенерированным с помощью исходного кода смарт-контракта. Если да, то мы можем утверждать, что мы подтвердили целостность исходного кода байт-кода. Поэтому и название такое - верификация.

### Как смарт-контракты верифицируются на zkSync? <a href="#how-are-smart-contracts-verified-in-zksync" id="how-are-smart-contracts-verified-in-zksync"></a>

Развернутый байт-код и исходный код смарт-контракта Solidity сравниваются в процессе верификации zkSync. Алгоритм компилирует исходный код и сравнивает полученный байт-код с уже развернутым в сети.\
Если они совпадают во всех аспектах, то контракт верифицируется.

Верификация кода требует 6 аргументов:

* Адрес компилятора
* Название контракта
* Исходный код, включая источник всех импортов
* Версию компилятора, использованного для производства развернутого кода
* Информацию о количестве оптимизаций компилятора (если есть)
* Аргументы конструктора

Если хотя бы один из этих пунктов не верен, то процесс верификации проваливается.

### Приватность исходного кода

Когда ваш контракт развернут на zkSync и верифицировать в обозревателе блоков, пользователи могут проверить верифицированный код и взаимодействовать с ним.

### Верификация контрактов с помощью обозревателя блоков zkSync <a href="#verifying-contracts-using-the-zksync-block-explorer" id="verifying-contracts-using-the-zksync-block-explorer"></a>

Вы можете верифицировать свой контракт для того, чтобы zkSync мог конвертировать его в читаемый кем угодно формат. Это полезно, если вы хотите получить максимум от возможностей zkEVM Debugger.

Чтобы начать, кликните на вкладку **Tools** наверху, появится всплывающий список, там выберите **Smart Contract Verification,** после чего вы увидите следующий экран:

<figure><img src="../../.gitbook/assets/image (4).png" alt=""><figcaption></figcaption></figure>

#### Введите детали контракта <a href="#enter-contract-details" id="enter-contract-details"></a>

Для верификации контракта введите следующие детали:

* Contract Address: Предоставленный адрес должен совпадать с `0х` адресом, предоставленным во время создания контракта.
* Contract Name: Имя контракта должно быть идентичным имени, указанному в контракте.
* Optimisation: Проверяется, использовалась ли оптимизацтя во время компиляции контракта. Если вы включали оптимизацию во время компиляции, выберите **Yes**, если нет, то **No.**
* Compiler Version: Здесь определяется точно версия компилятора, использованная для компиляции смарт-контракта. Нажмите на выпадающее меню и выберите использованную вами версию.

<figure><img src="../../.gitbook/assets/image (1).png" alt=""><figcaption></figcaption></figure>

* Enter the Solidity Contract code: Скопируйте код из вашего редактора и вставьте в текстовое поле.\
  **Внимание:** Вам, возможно, придется сгладить ваш Solidity код, если в нем используются библиотеки, или наследуются зависимости из другого контракта.\
  Мы рекомендуем использовать [truffle flattener](https://github.com/NomicFoundation/truffle-flattener) или [POA Solidity flattener.](https://github.com/poanetwork/solidity-flattener)
* Constructor arguments: Если аргументы конструктора требуются контрактом, то вам нужно добавить их в поле, но в закодированном виде [ABI hex encoded](https://solidity.readthedocs.io/en/develop/abi-spec.html).

### Как вы можете получить аргументы конструктора?

> **Внимание:** Самый легкий получить аргументы конструктора - это вывести их в консоли во время развертывания.

Например, используя наше [руководство](rukovodstvo-hello-world.md), вы можете найти строку:

```
const greeterContract = await deployer.deploy(artifact, [greeting]);
```

если вы добавите следующую строку как

```
console.log(greeterContract.interface.encodeDeploy([greeting]);
```

то получите данные аргументов конструктора.

* В конце нажмите на кнопку **Verify Smart Contract**.

\
Если все в порядке, вы увидите сообщение об успехе.\\

<figure><img src="../../.gitbook/assets/image (5).png" alt=""><figcaption></figcaption></figure>
