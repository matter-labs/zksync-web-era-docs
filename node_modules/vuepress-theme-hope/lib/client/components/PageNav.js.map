{"version":3,"file":"PageNav.js","sourceRoot":"","sources":["../../../src/client/components/PageNav.ts"],"names":[],"mappings":"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","sourcesContent":["import { usePageFrontmatter } from \"@vuepress/client\";\nimport { isPlainObject, isString } from \"@vuepress/shared\";\nimport { useEventListener } from \"@vueuse/core\";\nimport { computed, defineComponent, h } from \"vue\";\nimport { useRoute } from \"vue-router\";\n\nimport AutoLink from \"@theme-hope/components/AutoLink\";\nimport Icon from \"@theme-hope/components/Icon\";\nimport {\n  useAutoLink,\n  useNavigate,\n  useThemeLocaleData,\n} from \"@theme-hope/composables/index\";\nimport { useSidebarItems } from \"@theme-hope/modules/sidebar/composables/index\";\n\nimport type { VNode } from \"vue\";\nimport type { ResolvedSidebarItem } from \"../modules/sidebar/utils/index.js\";\nimport type {\n  ThemeNormalPageFrontmatter,\n  AutoLinkOptions,\n} from \"../../shared/index.js\";\n\nimport \"../styles/page-nav.scss\";\n\n/**\n * Resolve `prev` or `next` config from frontmatter\n */\nconst resolveFromFrontmatterConfig = (\n  conf: unknown\n): AutoLinkOptions | null | false => {\n  if (conf === false) return false;\n\n  if (isString(conf)) return useAutoLink(conf, true);\n\n  if (isPlainObject<AutoLinkOptions>(conf)) return conf;\n\n  return null;\n};\n\n/**\n * Resolve `prev` or `next` config from sidebar items\n */\nconst resolveFromSidebarItems = (\n  sidebarItems: ResolvedSidebarItem[],\n  currentPath: string,\n  offset: number\n): AutoLinkOptions | null => {\n  const index = sidebarItems.findIndex((item) => item.link === currentPath);\n\n  if (index !== -1) {\n    const targetItem = sidebarItems[index + offset];\n\n    if (!targetItem?.link) return null;\n\n    return targetItem as AutoLinkOptions;\n  }\n\n  for (const item of sidebarItems)\n    if (item.children) {\n      const childResult = resolveFromSidebarItems(\n        item.children,\n        currentPath,\n        offset\n      );\n\n      if (childResult) return childResult;\n    }\n\n  return null;\n};\n\nexport default defineComponent({\n  name: \"PageNav\",\n\n  setup() {\n    const themeLocale = useThemeLocaleData();\n    const frontmatter = usePageFrontmatter<ThemeNormalPageFrontmatter>();\n    const sidebarItems = useSidebarItems();\n    const route = useRoute();\n    const navigate = useNavigate();\n\n    const prevNavLink = computed(() => {\n      const prevConfig = resolveFromFrontmatterConfig(frontmatter.value.prev);\n\n      return prevConfig === false\n        ? null\n        : prevConfig ||\n            (themeLocale.value.prevLink === false\n              ? null\n              : resolveFromSidebarItems(sidebarItems.value, route.path, -1));\n    });\n\n    const nextNavLink = computed(() => {\n      const nextConfig = resolveFromFrontmatterConfig(frontmatter.value.next);\n\n      return nextConfig === false\n        ? null\n        : nextConfig ||\n            (themeLocale.value.nextLink === false\n              ? null\n              : resolveFromSidebarItems(sidebarItems.value, route.path, 1));\n    });\n\n    useEventListener(\"keydown\", (event): void => {\n      if (event.altKey) {\n        if (event.key === \"ArrowRight\") {\n          if (nextNavLink.value) {\n            navigate(nextNavLink.value.link);\n            event.preventDefault();\n          }\n        } else if (event.key === \"ArrowLeft\") {\n          if (prevNavLink.value) {\n            navigate(prevNavLink.value.link);\n            event.preventDefault();\n          }\n        }\n      }\n    });\n\n    return (): VNode | null =>\n      prevNavLink.value || nextNavLink.value\n        ? h(\"nav\", { class: \"page-nav\" }, [\n            prevNavLink.value\n              ? h(\n                  AutoLink,\n                  { class: \"prev\", config: prevNavLink.value },\n                  () => [\n                    h(\"div\", { class: \"hint\" }, [\n                      h(\"span\", { class: \"arrow left\" }),\n                      themeLocale.value.metaLocales.prev,\n                    ]),\n                    h(\"div\", { class: \"link\" }, [\n                      h(Icon, {\n                        icon: prevNavLink.value?.icon,\n                      }),\n                      prevNavLink.value?.text,\n                    ]),\n                  ]\n                )\n              : null,\n            nextNavLink.value\n              ? h(\n                  AutoLink,\n                  { class: \"next\", config: nextNavLink.value },\n                  () => [\n                    h(\"div\", { class: \"hint\" }, [\n                      themeLocale.value.metaLocales.next,\n                      h(\"span\", { class: \"arrow right\" }),\n                    ]),\n                    h(\"div\", { class: \"link\" }, [\n                      nextNavLink.value?.text,\n                      h(Icon, {\n                        icon: nextNavLink.value?.icon,\n                      }),\n                    ]),\n                  ]\n                )\n              : null,\n          ])\n        : null;\n  },\n});\n"]}