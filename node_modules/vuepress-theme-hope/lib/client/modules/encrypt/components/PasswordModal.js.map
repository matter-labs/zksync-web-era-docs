{"version":3,"file":"PasswordModal.js","sourceRoot":"","sources":["../../../../../src/client/modules/encrypt/components/PasswordModal.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,kBAAkB,EAAE,MAAM,kBAAkB,CAAC;AACtD,OAAO,EAAE,QAAQ,EAAE,eAAe,EAAE,CAAC,EAAE,QAAQ,EAAE,GAAG,EAAE,MAAM,KAAK,CAAC;AAElE,OAAO,EAAE,QAAQ,EAAE,MAAM,YAAY,CAAC;AACtC,OAAO,EAAE,kBAAkB,EAAE,MAAM,+BAA+B,CAAC;AAInE,OAAO,+BAA+B,CAAC;AAEvC,eAAe,eAAe,CAAC;IAC7B,IAAI,EAAE,eAAe;IAErB,KAAK,EAAE;QACL;;;;WAIG;QACH,IAAI,EAAE,OAAO;KACd;IAED,KAAK,EAAE;QACL,6DAA6D;QAC7D,MAAM,EAAE,CAAC,SAAiB,EAAE,SAAkB,EAAE,EAAE,CAAC,IAAI;KACxD;IAED,KAAK,CAAC,KAAK,EAAE,EAAE,IAAI,EAAE;QACnB,MAAM,WAAW,GAAG,kBAAkB,EAAE,CAAC;QACzC,MAAM,WAAW,GAAG,kBAAkB,EAAE,CAAC;QACzC,MAAM,QAAQ,GAAG,GAAG,CAAC,EAAE,CAAC,CAAC;QACzB,MAAM,QAAQ,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC;QAC5B,MAAM,QAAQ,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC;QAE5B,MAAM,MAAM,GAAG,QAAQ,CAAC,GAAG,EAAE,CAAC,WAAW,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;QAEhE,IAAI,WAAW,GAAkB,IAAI,CAAC;QAEtC,MAAM,MAAM,GAAG,GAAS,EAAE;YACxB,yBAAyB;YACzB,IAAI,WAAW;gBAAE,YAAY,CAAC,WAAW,CAAC,CAAC;YAC3C,QAAQ,CAAC,KAAK,GAAG,KAAK,CAAC;YAEvB,IAAI,CAAC,QAAQ,EAAE,QAAQ,CAAC,KAAK,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC;YAE/C,KAAK,QAAQ,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;gBACxB,QAAQ,CAAC,KAAK,GAAG,IAAI,CAAC;gBAEtB,WAAW,GAAG,UAAU,CAAC,GAAG,EAAE;oBAC5B,QAAQ,CAAC,KAAK,GAAG,KAAK,CAAC;gBACzB,CAAC,EAAE,IAAI,CAAsB,CAAC;YAChC,CAAC,CAAC,CAAC;QACL,CAAC,CAAC;QAEF,OAAO,GAAU,EAAE,CACjB,CAAC,CACC,KAAK,EACL;YACE,KAAK,EAAE;gBACL,gBAAgB;gBAChB,EAAE,MAAM,EAAE,KAAK,CAAC,IAAI,IAAI,WAAW,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE;aACpD;SACF,EACD,CAAC,CAAC,KAAK,EAAE,EAAE,KAAK,EAAE,gBAAgB,EAAE,EAAE;YACpC,CAAC,CACC,KAAK,EACL,EAAE,KAAK,EAAE,CAAC,MAAM,EAAE,EAAE,KAAK,EAAE,QAAQ,CAAC,KAAK,EAAE,CAAC,EAAE,EAC9C,QAAQ,CAAC,KAAK;gBACZ,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,SAAS;gBACxB,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,EAAE,YAAY,EAAE,MAAM,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAC1D;YACD,CAAC,CAAC,KAAK,EAAE,EAAE,KAAK,EAAE,UAAU,EAAE,EAAE;gBAC9B,CAAC,CAAC,OAAO,EAAE;oBACT,IAAI,EAAE,UAAU;oBAChB,KAAK,EAAE,QAAQ,CAAC,KAAK;oBACrB,WAAW,EAAE,MAAM,CAAC,KAAK,CAAC,WAAW;oBACrC,OAAO,EAAE,CAAC,EAAE,MAAM,EAAc,EAAE,EAAE;wBAClC,QAAQ,CAAC,KAAK,GAAsB,MAAO,CAAC,KAAK,CAAC;oBACpD,CAAC;oBACD,SAAS,EAAE,CAAC,EAAE,GAAG,EAAiB,EAAE,EAAE;wBACpC,IAAI,GAAG,KAAK,OAAO;4BAAE,MAAM,EAAE,CAAC;oBAChC,CAAC;iBACF,CAAC;aACH,CAAC;YACF,CAAC,CAAC,KAAK,EAAE,EAAE,KAAK,EAAE,mBAAmB,EAAE,EAAE;gBACvC,CAAC,CAAC,OAAO,EAAE;oBACT,IAAI,EAAE,UAAU;oBAChB,KAAK,EAAE,QAAQ,CAAC,KAAK;oBACrB,QAAQ,EAAE,GAAG,EAAE,CAAC,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC;iBACnD,CAAC;gBACF,MAAM,CAAC,KAAK,CAAC,QAAQ;aACtB,CAAC;YACF,CAAC,CAAC,QAAQ,EAAE,EAAE,KAAK,EAAE,QAAQ,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC,MAAM,EAAE,EAAE,EAAE,IAAI,CAAC;SAChE,CAAC,CACH,CAAC;IACN,CAAC;CACF,CAAC,CAAC","sourcesContent":["import { usePageFrontmatter } from \"@vuepress/client\";\nimport { computed, defineComponent, h, nextTick, ref } from \"vue\";\n\nimport { LockIcon } from \"./icons.js\";\nimport { useThemeLocaleData } from \"@theme-hope/composables/index\";\n\nimport type { VNode } from \"vue\";\n\nimport \"../styles/password-modal.scss\";\n\nexport default defineComponent({\n  name: \"PasswordModal\",\n\n  props: {\n    /**\n     * Whether is fullscreen\n     *\n     * 是否是全屏\n     */\n    full: Boolean,\n  },\n\n  emits: {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    verify: (_password: string, _remember: boolean) => true,\n  },\n\n  setup(props, { emit }) {\n    const frontmatter = usePageFrontmatter();\n    const themeLocale = useThemeLocaleData();\n    const password = ref(\"\");\n    const hasTried = ref(false);\n    const remember = ref(false);\n\n    const locale = computed(() => themeLocale.value.encryptLocales);\n\n    let hintHandler: number | null = null;\n\n    const verify = (): void => {\n      // clear previous handler\n      if (hintHandler) clearTimeout(hintHandler);\n      hasTried.value = false;\n\n      emit(\"verify\", password.value, remember.value);\n\n      void nextTick().then(() => {\n        hasTried.value = true;\n\n        hintHandler = setTimeout(() => {\n          hasTried.value = false;\n        }, 1000) as unknown as number;\n      });\n    };\n\n    return (): VNode =>\n      h(\n        \"div\",\n        {\n          class: [\n            \"password-layer\",\n            { expand: props.full || frontmatter.value[\"home\"] },\n          ],\n        },\n        h(\"div\", { class: \"password-modal\" }, [\n          h(\n            \"div\",\n            { class: [\"hint\", { tried: hasTried.value }] },\n            hasTried.value\n              ? locale.value.errorHint\n              : h(LockIcon, { \"aria-label\": locale.value.iconLabel })\n          ),\n          h(\"div\", { class: \"password\" }, [\n            h(\"input\", {\n              type: \"password\",\n              value: password.value,\n              placeholder: locale.value.placeholder,\n              onInput: ({ target }: InputEvent) => {\n                password.value = (<HTMLInputElement>target).value;\n              },\n              onKeydown: ({ key }: KeyboardEvent) => {\n                if (key === \"Enter\") verify();\n              },\n            }),\n          ]),\n          h(\"div\", { class: \"remember-password\" }, [\n            h(\"input\", {\n              type: \"checkbox\",\n              value: remember.value,\n              onChange: () => (remember.value = !remember.value),\n            }),\n            locale.value.remember,\n          ]),\n          h(\"button\", { class: \"submit\", onClick: () => verify() }, \"OK\"),\n        ])\n      );\n  },\n});\n"]}