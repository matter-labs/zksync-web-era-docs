import{h as o,defineComponent as m,ref as f,computed as d,onMounted as v,TransitionGroup as y}from"vue";import{useRouter as h}from"vue-router";import{IconBase as k,useLocaleConfig as C}from"vuepress-shared/client";import"../styles/notice.scss";const s=()=>o(k,{name:"close"},()=>o("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));s.displayName="CloseIcon";var L=m({name:"Notice",props:{locales:{type:Object,required:!0},noticeKey:{type:String,default:""},showOnce:Boolean,confirm:Boolean,fullscreen:Boolean},setup(e){const t=C(e.locales),a=h(),c=f(!1),i=d(()=>e.noticeKey?`notice-${e.noticeKey}`:`${e.locales["/"].title}${e.locales["/"].content}`);v(()=>{const n=(e.showOnce?localStorage:sessionStorage).getItem(i.value);c.value=!n});const l=()=>{c.value=!1,(e.showOnce?localStorage:sessionStorage).setItem("v2-notice","true")},r=n=>{n&&(n.startsWith("/")?a.push(n):window.open(n)),l()};return()=>o(y,{name:"notice-fade"},()=>c.value&&t.value?[e.fullscreen?o("div",{key:"mask",class:"notice-mask",onClick:()=>{e.confirm||l()}}):null,o("div",{key:"popup",class:["notice-wrapper",{fullscreen:e.fullscreen}]},[o("header",{class:"notice-title"},[o("span",{innerHTML:t.value.title}),e.confirm?null:o(s,{onClick:()=>l()})]),o("div",{class:"notice-content",innerHTML:t.value.content}),o("div",{class:"notice-footer"},t.value.actions.map(({text:n,link:u,type:p=""})=>o("button",{class:["notice-footer-action",p],onClick:()=>r(u),innerHTML:n})))])]:[])}});export{L as default};
//# sourceMappingURL=Notice.js.map
